<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="description" content="">
		<meta name="HandheldFriendly" content="True">
		<meta name="MobileOptimized" content="320">
		<meta name="viewport" content="initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<link rel="icon" href="../../static/imgs/mylogo.ico">
		<title>django学习笔记</title>
		<link rel="alternate" type="application/rss+xml" title="" href="feed/index.html">
		<link href="http://fonts.googleapis.com/css?family=Raleway:700,300" rel="stylesheet"
		type="text/css">
		<link rel="stylesheet" href="css/style.css">
		<link rel="stylesheet" href="css/prettify.css">
		<link href="../../static/css/carousel.css" rel="stylesheet">
		<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
		<script src="http://v3.bootcss.com/assets/js/ie10-viewport-bug-workaround.js"></script>
		<!-- Just for debugging purposes. Don't actually copy these 2 lines! -->
		<!--[if lt IE 9]><script src="../../assets/js/ie8-responsive-file-warning.js"></script><![endif]-->
		<script src="http://v3.bootcss.com/assets/js/ie-emulation-modes-warning.js"></script>
	</head>
	<body>
		<div class="wrapper">
			<section>
				<div class="container">
					<ul class="docs-nav">
						<li><strong>开发第一步</strong></li>
						<li><a href="#envbuild" class="cc-active">开发环境搭建</a></li>
						<li><a href="#pybasis" class="cc-active">python语言基础</a></li>
						<li><a href="#newprj" class="cc-active">新建一个工程</a></li>
						<li><a href="#github" class="cc-active">git和github基础</a></li>    
						<li><a href="#summary1" class="cc-active">小结：开发环境配置的流程</a></li>
						<li class="separator"></li>
						<li><strong>博客网站实例</strong></li>
						<li><a href="#newapp" class="cc-active">新建一个app</a></li>
						<li><a href="#database" class="cc-active">数据管理与数据库</a></li>
						<li><a href="#login" class="cc-active">用户登录</a></li>
						<li><a href="#email" class="cc-active">发送邮件</a></li>
						<li><a href="#register" class="cc-active">用户注册</a></li>
						<li class="separator"></li>
						<li style='color:black;'><strong><a href='menupage.html' style='color:black;'>返回学习笔记首页</a></strong></li>
					</ul>
					<div class="docs-content">
					
						<h2 style='font-size:250%;'><strong>开发第一步</strong></h2>
						<p>第一部分介绍的内容是从零开始如何一步一步把django的开发环境搭建起来，以便后续在此基础上进行
						各种项目的开发。</p>
						<br/>
						
						<h3 id="envbuild">开发环境搭建</h3>
						<p> 工欲善其事必先利其器，因此第一步需要搭建开发环境。</p>
						<p> 因为网站的主流架构是LAMP，即Linux+Apache+Mysql+PHP/Python/Perl，因此我们第一步需要在自己的
						电脑中安装一个虚拟机以运行Linux操作系统。本笔记虚拟机选择VMware，操作系统选择Ubuntu14.04.4LTS
						64-bit。读者可自行到其官网进行下载。虚拟机的安装过程网上有很多帖子介绍，在此不再详述。</p>
						<p> 虚拟机安装完成之后，我们在虚拟机中建立django的开发环境。首先切换到root账号，然后执行以下两
						条指令，用于更新安装好的系统信息，获取所有需要更新和升级的项目。</p>
						<pre class="prettyprint">$ sudo apt-get update<br/>$ sudo apt-get -y upgrade</pre>
						<p>然后我们继续用apt-get来安装pip，pip是python语言中重要的套件管理工具。</p>
						<pre class="prettyprint">$ sudo apt-get -y install python-pip</pre>  
						<p>之后我们就可以用pip来安装套件，首先来安装虚拟机环境virtualenv这个套件。虚拟环境的作用是创建
						一个独立的python环境，将每一个应用的环境独立开来，解决了不同应用及多版本之间的冲突问题。在开发
						的日常中，我们会将python及配套的应用全部安装在电脑上，所创建的应用都是使用这一套环境，这就很容
						易出现不同应用之间环境冲突，也会出现各种配置因版本的差异而不兼容，virtualenv将每一个应用的环境
						独立开来，并提供一套创建、复制、切换等管理虚拟环境的工具，使得环境配置变的简单。它的安装方法如
						下。</p>
						<pre class="prettyprint">$ sudo pip install virtualenv</pre>
						<p>之后，我们需要配置SSH以及FTP，执行以下命令。</p>
						<pre class="prettyprint">$ sudo apt-get -y install openssh-server<br/>$ sudo apt-get -y install vsftpd</pre>
						<p>之后，我们查看虚拟机ip地址已实现本机win系统与虚拟机的连接，执行如下指令。</p>
						<pre class="prettyprint"># ip a </pre>
						<p>配置完SSH服务器之后，我们可以使用putty这个软件远程连接到虚拟机，在win系统中用命令行的形式对
						虚拟机进行操作。配置完FTP服务器后，我们可以使用notepad++软件在win系统中对虚拟机中文件进行编辑。
						这两款软件的下载及配置方法在此不再详述，网上有很多帖子可供读者参考。</p>
						
						<h3 id="pybasis"> python语言基础</h3>
						<p>这部分内容请读者移步本站<a href='python.html'>python语言基础学习笔记</a></p>
						
						<h3 id="newprj"> 新建一个工程</h3>
						<p>首先，切换到普通账户，新建一个文件夹作为项目工作区，并进入这个工作区，执行如下指令。</p>
						<pre class="prettyprint"># mkdir xxx-prj<br># cd xxx-prj</pre>
						<p>然后，新建一个虚拟环境并激活它，执行如下指令。</p>
						<pre class="prettyprint"># virtualenv xxx-venv<br># source xxx-venv/bin/activate</pre>
						<p>第三，在虚拟环境中安装django，执行如下指令。</p>
						<pre class="prettyprint"># pip install django</pre>
						<p>第四，记录虚拟环境中安装的套件，执行如下指令。之后每次安装新的套件都要执行这条指令。</p>
						<pre class="prettyprint"># pip freeze > requirements.txt</pre>
						<p>第五，新建django项目，执行如下指令。</p>
						<pre class="prettyprint"># django-admin startproject xxx </pre>
						<p>执行完这条指令后，在项目工作区xxx-prj中会出现一个子文件夹xxx，我们将其称为项目文件夹。
						此时xxx-prj中会有两个子文件夹，分别为xxx和xxx-venv。然后我们进入项目文件夹xxx，并新建两
						个子文件夹templates和static。</p>
						<p>最后，我们对项目进行一些基本配置，包括设定服务器、模板路径、静态文件路径、语言格式以及时区
						设置。打开xxx-prj/xxx/xxx/settings.py文件，完成如下修改。</p>
						<pre class="prettyprint">ALLOWED_HOSTS = ['*']<br>'DIRS': [os.path.join(BASE_DIR,'templates')],<br>STATICFILES_DIRS=[os.path.join(BASE_DIR,'static'),]<br>LANGUAGE_CODE='zh-hans'<br>TIME_ZONE='Asia/Shanghai'</pre>
						<p>至此，我们完成了新建django项目的工作。</p>
						
						<h3 id="github"> git和github基础</h3>
						<p>git是一个开源的分布式版本控制系统，可以有效、高速地处理从很小到非常大的项目版本管理。它是
						Linus Torvalds为了帮助管理Linux内核开发而开发的一个开放源码的版本控制软件。gitHub是一个面向开
						源及私有软件项目的托管平台，因为只支持git作为唯一的版本库格式进行托管，故名gitHub。</p>
						<p>综上，学会git和github的使用对于开发者而言意义重大。本节首先介绍几个常用功能，然后在结尾向
						读者推荐网络上非常流行的一个github教程。</p>
						<p>首先，前往github注册一个账号，不再赘述。</p>
						<p>然后，在github上新建一个仓库（repository），同时新建说明文档ReadMe.MD。</p>
						<p>第三，完成上一节新建django工程后，从本地项目工作区进入项目文件夹，执行以下指令。</p>
						<pre class="prettyprint"># cd xxx</pre>
						<p>第四，在本地项目文件夹中进行git的初始化，执行如下指令。</p>
						<pre class="prettyprint"># git init</pre>
						<p>第五，配置用户信息，用户名和邮箱可以自行确定，执行如下指令。</p>
						<pre class="prettyprint"># git config --global user.name 'xx'<br/># git config --global user.email 'xx@xx'</pre>
						<p>第六，配置远程仓库地址，指定为第二步新建的仓库地址，执行如下指令。</p>
						<pre class="prettyprint"># git remote add origin 'xxxxxxxxxxxxxxxxxxgithub.com'</pre>
						<p>第七，更改代码后，查看更改信息，执行如下指令。</p>
						<pre class="prettyprint"># git status</pre>
						<p>第八，将更改信息加入git，执行如下指令。</p>
						<pre class="prettyprint"># git add .</pre>
						<p>第九，提交本次更改，并添加备注信息，执行如下指令。</p>
						<pre class="prettyprint"># git commit -m 'xxxxx'</pre>
						<p>第十，将本次更改推送到远程仓库，执行如下指令。</p>
						<pre class="prettyprint"># git pull origin master<br/># git push origin master</pre>
						<p>以上是网站开发过程中常用的git命令，下面推荐一个来自网络的git教程。链接如下，提取码为fxvq。</p>
						<a>https://pan.baidu.com/s/1z3qKr6FOFWQXd3mW-w7ZVA</a>
						
						<h3 id="summary1">小结：开发环境配置的流程</h3>
						<p>这一章介绍了从零开始如何搭建起django的开发环境，首先我们需要运行着linux的虚拟机；然后我们
						需要在虚拟机中配置项目开发的虚拟环境，并在虚拟环境中安装开发需要的各种套件；之后新建django项
						目；最后，完成git及github的配置，对项目进行有效的管理。</p>
						
						<hr>
						<h2 style='font-size:250%;'><strong>博客网站实例</strong></h2>
						<p> 这一部分我们通过一个实例——博客网站来学习django建站的流程，完成这一章节的学习应该可以完成
						一些基本网站的搭建了。这个章节基于前一章节的内容，读者需新建一个工程，相关文件名为blog-prj，
						blog-venv，blog。</p>
						
						<h3 id="newapp">新建一个app</h3>
						<p>首先，在项目文件夹中，执行如下指令。</p>
						<pre class="prettyprint"># python manage.py startapp mainsite</pre>
						<p>然后，我们在settings.py中将这个新建的app加入app列表，对settings.py文件对应部分修改如下。</p>
						<pre class="prettyprint">INSTALLED_APPS=[...,....,'mainsite',]</pre>
						<p>此时，在项目文件中会出现mainsite子文件夹，它和上一节创建的templates和static是同级文件夹。</p>
						
						<h3 id="database">数据管理与数据库配置</h3>
						<p>django程序中不直接面对数据库和数据表，而是通过Model的方式进行操作，这样做的好处是更换数据库
						系统时可以不更改程序。</p>
						<p>django中数据以类的形式定义在model.py中，通常一个类对应数据库中一个数据表。models.py第一行
						内容如下，引入models作为创建数据类的基类。</p>
						<pre class="prettyprint">from django.db import models</pre>
						<p>通常写法如下：</p>
						<pre class="prettyprint">class Post(models.Model):<br>	mood = models.ForeignKey('Mood', on_delete=models.CASCADE)<br>	nickname = models.CharField(max_length=10, default='不愿意透露身份的人')<br>	message = models.TextField(null=False)<br>	del_pass = models.CharField(max_length=10)<br>	pub_time = models.DateTimeField(auto_now=True)<br>	enabled = models.BooleanField(default=False)<br>	def __unicode__(self):<br>		return self.message</pre>
						<p>django项目默认的数据库配置为sqlite，目前业界用的更多的是mysql。本节将分别介绍这两种数据库的
						配置方法。</p>
						
						<h3 id="login">用户登录</h3>
						
						<h3 id="email">发送邮件</h3>
						
						<h3 id="register">用户注册</h3>
					</div>
				</div>
			</section>
		</div>
		<script src="https://cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script>
		<script type="text/javascript" src="js/prettify/prettify.js"></script> 
		<script src="https://cdn.bootcss.com/prettify/r298/run_prettify.js"></script>
		<script src="js/layout.js"></script>
		<!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
		<script src="http://v3.bootcss.com/assets/js/ie10-viewport-bug-workaround.js"></script>
	</body>
</html>
